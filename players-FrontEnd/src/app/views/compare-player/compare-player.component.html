<app-header></app-header>
<div class="busqueda-nombre">
  <h1>B칰squeda por Nombre</h1>
  <label for="nombre">Ingrese nombre del jugador: </label>
  <input type="text" id="nombre" name="nombre" [(ngModel)]="busquedaNombre" />

  <label>Seleccione posicion del juguador:</label>
  <button type="button" class="button-arquero" (click)="valorJugador('arquero')">Arquero</button>
  <button type="button" class="button-campo" (click)="valorJugador('campo')">Campo</button>

  <div *ngIf="campo">
    <label for="player-stats">Selecciona una estad칤stica del jugador:</label>
    <select id="player-stats" name="player-stats" [(ngModel)]="selectedStat">
      <option value="pace">Velocidad</option>
      <option value="shooting">Tiro</option>
      <option value="passing">Pase</option>
      <option value="dribbling">Regate</option>
      <option value="defending">Defensa</option>
      <option value="physic">F칤sico</option>
    </select>
  </div>
  <div *ngIf="arquero">
    <label for="goalkeeper-stats"
      >Selecciona una estad칤stica del Arquero:</label
    >
    <select
      id="goalkeeper-stats"
      name="goalkeeper-stats"
      [(ngModel)]="selectedStat"
    >
      <option value="goalkeeping_diving">Salto</option>
      <option value="goalkeeping_handling">Atrapar</option>
      <option value="goalkeeping_kicking">Pegada</option>
      <option value="goalkeeping_positioning">Posicionamiento</option>
      <option value="goalkeeping_reflexes">Reflejos</option>
      <option value="goalkeeping_speed">Velocidad</option>
    </select>
  </div>
</div>
<button (click)="obtenerJugadorPorNombre()" class="button-buscar">Buscar</button>

<!-- Container principal con layout 70/30 -->
<div class="main-container" *ngIf="resultados.length > 0">
  
  <!-- Secci칩n izquierda: Resultados (70%) -->
  <div class="resultados-section">
    <h1>Resultados</h1>
    <table>
    <tr>
      <th>Nombre</th>
      <th>Versi칩n</th>
      <th>Imagen</th>
      <th>Nacionalidad</th>
      <th>Club</th>
      <th>Valoraci칩n</th>
      <th>Posici칩n</th>
      <th>Pie</th>
      <th>Edad</th>
    </tr>
    <tr *ngFor="let player of resultados || [] ">
      <td class="nombre-clickeable" (click)="mostrarJugadorEnChart(player.long_name)" title="Haz clic para ver en el gr치fico">
        {{ player.long_name }}
      </td>
      <td>{{ player.fifa_version }}</td>
      <td>
          <img [src]="getImageUrl(player)"
               class="player-image"
               width="64"
               height="64"
               (error)="handleImageError($event)"
               [alt]="'Foto de ' + player.long_name"
               loading="eager"
               crossorigin="anonymous"
               referrerpolicy="no-referrer" />
      </td>
      <td>{{ player.nationality_name }}</td>
      <td>{{ player.club_name }}</td>
      <td>{{ player.overall }}</td>
      <td>{{ player.player_positions }}</td>
      <td>{{ player.preferred_foot }}</td>
      <td>{{ player.age }}</td>
    </tr>
  </table>
  </div>

  <!-- Secci칩n derecha: Gr치fico (30%) -->
  <div class="chart-section">
    <div class="chart-controls" *ngIf="resultados.length > 1">
      <button (click)="mostrarTodosLosJugadores()" class="button-todos" title="Mostrar todos los jugadores en el gr치fico">
        游늵 Ver Todos
      </button>
    </div>
    <div class="chart-container">
      <canvas id="myChart"></canvas>
    </div>
  </div>

</div>
